<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>JSON Song Object</title>
	<script   src="https://code.jquery.com/jquery-3.1.1.min.js"   integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="   crossorigin="anonymous"></script>
	<!--script language="javascript" src="animals.json"></script-->
	

</head>

<body>
	<textarea id = "finalText" value = "" rows = "5" style="height:200px; width:500px; font-size:14pt;"></textarea><br />
	<script language="javascript">
	$.get( "hw7.json", 
		  
	      	function( data ) {
			str = JSON.stringify(data);
			document.write(str +"<br/>");
			document.write("<br/>" + "<br/>")
      obj = JSON.parse(str)
	for (i = 0; i < obj.length; i++) {
		document.write("Artists: ")
		for (j = 0; j < obj[i]["artists"].length; j++) {
			document.write(obj[i]["artists"][j] + ", ")	       
		}
		document.write("<br/>")
		document.write("Title: " + obj[i]["title"] + "<br/>")
		document.write("Genres: ")
		for (k = 0; k < obj[i]["genres"].length; k++) {
			document.write(obj[i]["genres"][k] + ", ")	       
		}
		document.write("<br/>")
		document.write("Released: " + obj[i]["year"] + "<br/>" + "<br/>")
		
	}
	document.write("<br/>" + "<br/>")
	const genreSet = new Set();
	for (x = 0; x < obj.length; x++) {
		for (y = 0; y < obj[x]["genres"].length; y++) {
			genreSet.add(obj[x]["genres"][y])
		}
	}
	const genreArray = [...genreSet];
	
	document.write("Filter by Genre:")
	var t= "";
	t = "<select name='genreSelect'>";
	t += "<option>" + " " + "</option>";
	for (z=0; z < genreArray.length; z++)
	   t += "<option>" + genreArray[z] + "</option>";
	t+= "</select>"; 
	document.write(t);

	document.write("<br/>" + "<br/>" + "<br/>")
	var chosenGenre = "";
	
	var finalString = ""
	$('[name="genreSelect"]').on('change', function() { 
		chosenGenre = $('[name="genreSelect"]').val();	
		finalString = "";
		finalString += (chosenGenre + "<br/>" + "<br/>");
		for (a = 0; a < obj.length; a++) {
			for (b = 0; b < obj[a]["genres"].length; b++) {
				if (obj[a]["genres"][b] == chosenGenre) {
					finalString += ("Artists: ")
					for (c = 0; c < obj[a]["artists"].length; c++) {
						finalString += (obj[a]["artists"][c] + ", ")	       
					}
					finalString += ("<br/>")
					finalString += ("Title: " + obj[a]["title"] + "<br/>")
					finalString += ("Genres: ")
					for (d = 0; d < obj[a]["genres"].length; d++) {
						finalString += (obj[a]["genres"][d] + ", ")	       
					}
					finalString += ("<br/>")
					finalString += ("Released: " + obj[a]["year"] + "<br/>" + "<br/>")
				}
			}
		}
		document.getElementById("finalText").value = finalString;
		
	})
		
	})
</script>

</body>
</html>

